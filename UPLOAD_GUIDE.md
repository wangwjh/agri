# 农业数据平台 - 大文件上传指南

## 📋 概述

农业数据资产交易平台现已支持大文件上传功能，单个文件最大支持 **5GB**，满足大型农业数据集的上传需求。

## 🚀 功能特性

### ✅ 支持的功能
- **大文件上传**：单个文件最大支持 5GB
- **多文件批量上传**：可同时上传多个文件
- **实时进度显示**：上传过程中显示实时进度
- **断点续传支持**：大文件上传更稳定
- **多种文件格式**：支持常见的农业数据格式

### 📁 支持的文件类型

| 类型 | 格式 | 说明 |
|------|------|------|
| 数据文件 | CSV, Excel, JSON, XML, TXT | 结构化农业数据 |
| 文档文件 | PDF, Word | 研究报告、说明文档 |
| 图片文件 | PNG, JPG, GIF, TIFF, WebP | 农田图像、卫星图等 |
| 压缩文件 | ZIP, RAR, 7Z, TAR, GZ | 大型数据集压缩包 |
| 视频文件 | MP4, AVI, MOV, MKV, WMV | 农业监控视频 |
| 音频文件 | MP3, WAV, OGG, FLAC, AAC | 环境音频数据 |

## 🔧 配置说明

### 后端配置

在 `backend/src/main/resources/application.yml` 中已配置：

```yaml
spring:
  servlet:
    multipart:
      max-file-size: 5GB      # 单个文件最大大小
      max-request-size: 5GB   # 单次请求最大大小
      file-size-threshold: 10MB  # 内存阈值
      enabled: true           # 启用multipart上传
      location: ./temp        # 临时文件位置

app:
  upload:
    path: ./uploads  # 文件上传存储路径
```

### 前端配置

- **上传超时**：10分钟（适合大文件）
- **进度显示**：实时显示上传百分比
- **文件验证**：客户端预验证文件大小和格式

## 📱 使用方法

### 1. 访问上传页面
登录后点击导航栏的"上传"按钮，进入数据资产上传页面。

### 2. 填写基本信息
- 资产名称（必填）
- 价格（必填）
- 作物类型（必填）
- 种植地点（必填）
- 详细描述（必填）

### 3. 上传文件
- **拖拽上传**：直接将文件拖拽到上传区域
- **点击上传**：点击上传区域选择文件
- **多文件选择**：支持同时选择多个文件

### 4. 查看进度
- 实时显示上传进度百分比
- 显示当前上传状态
- 文件上传完成后显示成功信息

### 5. 提交审核
文件上传完成后，系统会自动创建数据资产记录并提交审核。

## ⚠️ 注意事项

### 网络要求
- **稳定连接**：大文件上传需要稳定的网络连接
- **上传时间**：5GB文件可能需要较长时间，请耐心等待
- **避免中断**：上传过程中请勿关闭浏览器或切换网络

### 文件要求
- **大小限制**：单个文件不超过 5GB
- **格式限制**：仅支持列表中的文件格式
- **内容真实**：确保上传的数据真实有效

### 系统要求
- **浏览器**：建议使用 Chrome、Firefox、Safari 等现代浏览器
- **内存**：大文件上传时建议保证充足的系统内存
- **存储空间**：确保服务器有足够的存储空间

## 🛠️ 故障排除

### 常见问题

**Q: 上传失败怎么办？**
A: 检查网络连接，确认文件大小和格式符合要求，重新尝试上传。

**Q: 上传进度卡住不动？**
A: 大文件上传可能需要较长时间，请耐心等待。如长时间无响应，可刷新页面重新上传。

**Q: 支持断点续传吗？**
A: 当前版本暂不支持断点续传，建议在网络稳定时进行大文件上传。

**Q: 上传的文件存储在哪里？**
A: 文件存储在服务器的 `./uploads` 目录下，按用户和日期分类组织。

### 错误代码

| 错误代码 | 说明 | 解决方案 |
|---------|------|----------|
| 413 | 文件过大 | 检查文件是否超过5GB限制 |
| 415 | 不支持的文件类型 | 确认文件格式在支持列表中 |
| 401 | 用户未登录 | 重新登录后再试 |
| 500 | 服务器错误 | 联系技术支持 |

## 📞 技术支持

如遇到技术问题，请联系：
- 邮箱：support@agridata.com
- 电话：400-xxx-xxxx
- 在线客服：平台右下角聊天窗口

---

> 💡 **提示**：为了获得最佳上传体验，建议在网络稳定的环境下进行大文件上传操作。 